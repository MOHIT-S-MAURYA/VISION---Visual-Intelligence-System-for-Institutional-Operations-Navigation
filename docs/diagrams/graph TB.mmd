
flowchart TD
    Start([ğŸ‘¤ User Opens Website]) --> Login{Is User<br/>Logged In?}
    
    Login -->|No| LoginPage[ğŸ” Login Page<br/>Enter Username & Password]
    LoginPage --> Verify{Valid<br/>Credentials?}
    Verify -->|No| LoginError[âŒ Show Error Message]
    LoginError --> LoginPage
    Verify -->|Yes| Dashboard
    
    Login -->|Yes| Dashboard[ğŸ“Š Dashboard<br/>Teacher/Admin Portal]
    
    Dashboard --> Choice{What do you<br/>want to do?}
    
    Choice -->|Register Student| RegStart[ğŸ“ Student Registration]
    Choice -->|Mark Attendance| AttStart[âœ… Mark Attendance]
    Choice -->|View Reports| ReportStart[ğŸ“ˆ View Reports]
    
    %% Student Registration Flow
    RegStart --> RegForm[Fill Student Details:<br/>â€¢ Name<br/>â€¢ Department<br/>â€¢ Year<br/>â€¢ Roll Number optional]
    RegForm --> Capture[ğŸ“· Capture Face Photos<br/>System takes 5-10 photos automatically]
    Capture --> Quality{Photos<br/>Good Quality?}
    Quality -->|No| QualityError[âŒ Poor Quality<br/>Please retake in good lighting]
    QualityError --> Capture
    Quality -->|Yes| ProcessReg[ğŸ¤– AI Processing:<br/>1. Analyze face features<br/>2. Create digital fingerprint<br/>3. Store in database]
    ProcessReg --> RegSuccess[âœ… Student Registered!<br/>Roll Number: CSE-2025-00001]
    RegSuccess --> Dashboard
    
    %% Attendance Marking Flow
    AttStart --> SelectClass[Select:<br/>â€¢ Department CSE<br/>â€¢ Year First Year<br/>â€¢ Subject Programming in C]
    SelectClass --> CreateSession[Create Attendance Session]
    CreateSession --> StartCamera[ğŸ“¹ Start Camera<br/>Live video feed begins]
    StartCamera --> Scanning[ğŸ” Continuous Scanning<br/>Looking for faces every 0.4 seconds]
    
    Scanning --> DetectFace{Face<br/>Detected?}
    DetectFace -->|No| Scanning
    DetectFace -->|Yes| Recognize[ğŸ¤– AI Recognition:<br/>1. Extract face features<br/>2. Compare with database<br/>3. Find matching student]
    
    Recognize --> Match{Match<br/>Found?}
    Match -->|No| ShowRed[ğŸ”´ Red Box<br/>Unknown Person]
    ShowRed --> Scanning
    Match -->|Yes| AlreadyMarked{Already<br/>Marked Present?}
    AlreadyMarked -->|Yes| ShowGreen[ğŸŸ¢ Green Box<br/>Already Present]
    ShowGreen --> Scanning
    AlreadyMarked -->|No| MarkPresent[âœ… Mark Present<br/>Save to database]
    MarkPresent --> ShowGreen2[ğŸŸ¢ Green Box + Name<br/>Rahul Kumar]
    ShowGreen2 --> UpdateList[ğŸ“‹ Add to Present List]
    UpdateList --> Scanning
    
    Scanning --> StopAtt{Teacher Stops<br/>Scanning?}
    StopAtt -->|No| Scanning
    StopAtt -->|Yes| EndSession[Session Ended<br/>Show Summary]
    EndSession --> Dashboard
    
    %% Reports Flow
    ReportStart --> SelectReport{Choose<br/>Report Type}
    SelectReport -->|Session Report| SessionReport[ğŸ“Š View Specific Session:<br/>â€¢ Date & Time<br/>â€¢ Subject<br/>â€¢ Present/Absent Students]
    SelectReport -->|Student Report| StudentReport[ğŸ“Š View Student History:<br/>â€¢ Attendance percentage<br/>â€¢ All sessions attended]
    SessionReport --> ExportOption[ğŸ’¾ Export to Excel/PDF]
    StudentReport --> ExportOption
    ExportOption --> Dashboard
    
    %% Styling
    style Start fill:#4CAF50,stroke:#2E7D32,color:#fff
    style Dashboard fill:#2196F3,stroke:#1565C0,color:#fff
    style RegSuccess fill:#4CAF50,stroke:#2E7D32,color:#fff
    style MarkPresent fill:#4CAF50,stroke:#2E7D32,color:#fff
    style LoginError fill:#F44336,stroke:#C62828,color:#fff
    style QualityError fill:#F44336,stroke:#C62828,color:#fff
    style ShowRed fill:#F44336,stroke:#C62828,color:#fff
    style ShowGreen fill:#4CAF50,stroke:#2E7D32,color:#fff
    style ShowGreen2 fill:#4CAF50,stroke:#2E7D32,color:#fff